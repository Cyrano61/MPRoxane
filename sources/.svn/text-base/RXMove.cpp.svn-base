/*
 *  RXMove.cpp
 *  Roxane
 *
 *  Created by Bruno Causse on 27/06/05.
 *  Copyright 2005 personnel. All rights reserved.
 *
 */
#include <cmath>

#include "RXMove.h"
#include "RXConstantes.h"

void RXBestPosition::to_COsMoveListItem(COsMoveListItem& mli) {

	if (position == PASS) {
		mli.mv.fPass = true;
		mli.mv.row = -1;
		mli.mv.col = -1;
		
	} else {
		mli.mv.fPass = false;
		mli.mv.row = 7 - static_cast<int>(floor(position/8));
		mli.mv.col = 7 - position%8;
	}
	
	mli.dEval = (double)score/VALUE_DISC;
	mli.tElapsed = tElapsed;
	
}

/*
void RXMove::index_to_COsMove(int index, COsMove& move) {

	if (index == PASS) {
		move.fPass = true;
		move.row = -1;
		move.col = -1;
		
	} else {
		move.fPass = false;
		move.row = 7 - static_cast<int>(floor(index/8));
		move.col = 7 - index%8;
	}
	
	
}

std::string RXMove::COsMove_to_coord(COsMove& move) {

	if (move.fPass)
		return std::string("PA");
	 
	return (std::string(1, "ABCDEFGH"[move.col]) + std::string(1, "12345678"[move.row]));

}
*/

std::string RXMove::index_to_coord(int index) {

	if (index == PASS)
		return std::string("PA");

	return (std::string(1, "HGFEDCBA"[index%8]) + std::string(1, "87654321"[index/8]));

}

int RXMove::coord_to_index(std::string coord) {

	if( coord == "PA" || coord == "PASS")
		return PASS;
		
	return (('8' - coord[1])*8 + ('h' - std::tolower(coord[0])));
}


//debug
std::ostream& operator<<(std::ostream& os, RXMove* list) {

	for(RXMove* move = list->next; move != NULL; move = move->next)
		os << RXMove::index_to_coord(move->position) << ' ';
		
	return os;
}
